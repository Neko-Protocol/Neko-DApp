# Get staged files that match Prettier patterns
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(js|jsx|ts|tsx|json|css|scss|md|yml|yaml)$') || true

if [ -n "$STAGED_FILES" ]; then
  # Format staged files with Prettier
  echo "Formatting staged files with Prettier..."
  echo "$STAGED_FILES" | xargs npx prettier --write || true
  
  # Add formatted files back to staging
  echo "$STAGED_FILES" | xargs git add || true
fi

# Run linting (skip for initial commit)
# npm run lint
